var haloImgUtil = (function (exports) {
  'use strict';

  /**
   * 预加载图片
   * @params {array} images 图片地址
   */
  function preloadImage(srcArr) {
      if (srcArr === void 0) { srcArr = []; }
      return new Promise(function (resolve) {
          var images = Array.from(new Set(srcArr));
          var loaded = [];
          var _loop_1 = function (i) {
              var img = new Image();
              img.src = images[i];
              var push = function () {
                  loaded.push(img.src);
                  if (loaded.length >= images.length) {
                      resolve(loaded);
                  }
              };
              img.onload = push;
              img.onerror = push;
          };
          for (var i = 0; i < images.length; i++) {
              _loop_1(i);
          }
      });
  }
  /**
   * @description: 获取本地图片文件尺寸
   * @param {File} file
   * @return: Promise<{widh: string, height: string}>
   */
  function getFileImageSize(file) {
      return new Promise(function (resolve) {
          if (!file)
              return resolve(null); // 没有选择图片，直接return
          if (!/^image\/[jpeg|png|jpg|gif|svg|ico]/gi.test(file.type)) {
              console.error("文件类型不是图片");
              return resolve(null);
          }
          var img = new Image();
          img.src = URL.createObjectURL(file);
          img.onload = function () {
              var width = img.width, height = img.height;
              resolve({
                  width: width,
                  height: height
              });
          };
          img.onerror = function () { return resolve(null); };
      });
  }

  exports.getFileImageSize = getFileImageSize;
  exports.preloadImage = preloadImage;

  Object.defineProperty(exports, '__esModule', { value: true });

  return exports;

}({}));

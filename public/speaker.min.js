var haloSpeaker = (function () {
  'use strict';

  var speaker;
  var win = window;
  // 停止语音
  function stop() {
      if (win.speechSynthesis) {
          win.speechSynthesis.cancel();
      }
  }
  // 播放语音
  function speak(text) {
      stop();
      if (!speaker && win.SpeechSynthesisUtterance) {
          speaker = new win.SpeechSynthesisUtterance();
      }
      if (speaker) {
          speaker.text = text;
          win.speechSynthesis.speak(speaker);
      }
  }
  // 监听语音结束
  function onend(callback) {
      if (callback === void 0) { callback = function () { }; }
      if (!speaker && win.SpeechSynthesisUtterance) {
          speaker = new win.SpeechSynthesisUtterance();
      }
      speaker && (speaker.onend = callback);
  }
  var speaker$1 = {
      speak: speak,
      stop: stop,
      onend: onend
  };

  return speaker$1;

}());

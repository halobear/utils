var haloLocalData = (function () {
  'use strict';

  /**
   * 设置localStorage过期时间
   * @param key{string}
   * @param value{string}
   * @param maxAge{number} 分钟 (默认7天)
   */
  function setLocalData(key, value, maxAge) {
      if (maxAge === void 0) { maxAge = 60 * 24 * 7; }
      var data = {
          value: value,
          maxAge: maxAge * 60000,
          timestamp: Date.now(),
      };
      localStorage.setItem(key, JSON.stringify(data));
  }
  /**
   * 获取本地localData
   * @param key{string}
   */
  function getLocalData(key) {
      try {
          var dataStr = localStorage.getItem(key);
          if (!dataStr)
              return null;
          var _a = JSON.parse(dataStr), value = _a.value, maxAge = _a.maxAge, timestamp = _a.timestamp;
          var data = maxAge + timestamp > Date.now() ? value : null;
          if (!data)
              localStorage.removeItem(key); // 超时删除缓存
          return data;
      }
      catch (e) {
          console.error(e);
          localStorage.removeItem(key);
          return null;
      }
  }
  /**
   * 删除本地localData
   * @param key{string}
   */
  function clearLocalData(key) {
      localStorage.remove(key);
  }
  /**
   * 创建localStorage缓存,用于用户信息
   * @param key{string}
   * @param maxAge{number} 分钟 (默认1天)
   */
  function createCache(key, maxAge) {
      if (maxAge === void 0) { maxAge = 60 * 24; }
      return {
          get: function () {
              return getLocalData(key);
          },
          set: function (data) {
              console.log("localData\u5B58\u5165" + key + "\u6709\u6548\u65F6\u95F4\uFF1A" + maxAge + "\u5206\u949F");
              setLocalData(key, data, maxAge);
          },
          clear: function () {
              localStorage.removeItem(key);
          },
      };
  }
  var localData = {
      get: getLocalData,
      set: setLocalData,
      clear: clearLocalData,
      create: createCache,
  };

  return localData;

}());
